<header class="header">
  <div class="header-content">
    <div class="logo">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="logo-icon">
        <defs>
          <radialGradient id="headerBg" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#2a1538"/>
            <stop offset="100%" stop-color="#0f0f1a"/>
          </radialGradient>
          <linearGradient id="headerFire" x1="0" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="#e74c3c"/>
            <stop offset="40%" stop-color="#e67e22"/>
            <stop offset="80%" stop-color="#f1c40f"/>
            <stop offset="100%" stop-color="#fff5cc"/>
          </linearGradient>
          <linearGradient id="headerNote" x1="0" y1="1" x2="0.3" y2="0">
            <stop offset="0%" stop-color="#8e44ad"/>
            <stop offset="100%" stop-color="#d5a6e6"/>
          </linearGradient>
          <linearGradient id="headerRing" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#9b59b6"/>
            <stop offset="50%" stop-color="#e74c3c"/>
            <stop offset="100%" stop-color="#e67e22"/>
          </linearGradient>
        </defs>
        <circle cx="256" cy="256" r="230" fill="url(#headerBg)"/>
        <circle cx="256" cy="256" r="230" fill="none" stroke="url(#headerRing)" stroke-width="12"/>
        <g opacity="0.9">
          <path d="M256 100 C240 160, 200 180, 210 220 C215 245, 235 250, 240 230 C245 215, 230 200, 240 170 C250 145, 256 130, 262 145 C272 170, 258 200, 265 220 C270 235, 285 240, 290 220 C300 180, 270 165, 256 100Z" fill="url(#headerFire)"/>
          <path d="M200 180 C190 155, 175 150, 180 135 C184 125, 196 130, 195 145 C194 155, 202 160, 200 180Z" fill="url(#headerFire)" opacity="0.7"/>
          <path d="M312 180 C322 155, 337 150, 332 135 C328 125, 316 130, 317 145 C318 155, 310 160, 312 180Z" fill="url(#headerFire)" opacity="0.7"/>
        </g>
        <ellipse cx="222" cy="340" rx="52" ry="40" transform="rotate(-15, 222, 340)" fill="url(#headerNote)"/>
        <rect x="268" y="148" width="14" height="205" rx="7" fill="url(#headerNote)"/>
        <path d="M282 148 C282 148, 330 170, 330 210 C330 240, 300 245, 290 230 C310 225, 318 205, 282 185Z" fill="url(#headerNote)"/>
      </svg>
      <h1>RagePad</h1>
    </div>
    <div class="header-search">
      <app-vbcable-banner
        *ngIf="showVBCableBanner"
        (dismissed)="vbcableDismissed.emit()"
        (installed)="vbcableInstalled.emit()"
      ></app-vbcable-banner>
      <app-search-bar *ngIf="!showVBCableBanner" (search)="onSearch($event)"></app-search-bar>
    </div>
    <div class="header-actions">
      <button
        class="reorder-btn-icon"
        [class.active]="isReorderMode"
        (click)="onToggleReorderMode()"
        title="{{ isReorderMode ? 'Exit edit mode' : 'Edit mode' }}"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
        </svg>
      </button>
      <button
        class="queue-btn-icon"
        [class.active]="isQueueMode"
        (click)="onToggleQueueMode()"
        title="{{ isQueueMode ? 'Exit queue mode (' + queueLength + ' queued)' : 'Queue mode â€“ click sounds to play in order' }}"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/>
        </svg>
        <span class="queue-count-badge" *ngIf="isQueueMode && queueLength > 0">{{ queueLength }}</span>
      </button>
      <button
        *ngIf="nsfwModeEnabled"
        class="nsfw-btn-icon"
        [class.active]="!showNsfw"
        (click)="onToggleNsfwMode()"
        title="{{ showNsfw ? 'Hide NSFW content' : 'Show NSFW content' }}"
      >
        <!-- Eye icon (showing NSFW) -->
        <svg *ngIf="showNsfw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
        </svg>
        <!-- Eye-off icon (hiding NSFW) -->
        <svg *ngIf="!showNsfw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
        </svg>
      </button>
      <button class="store-btn-icon" (click)="onToggleStore()" title="Sound Store">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M18.36 9l.6 3H5.04l.6-3h12.72M20 4H4v2h16V4zm0 3H4l-1 5v2h1v6h10v-6h4v6h2v-6h1v-2l-1-5zM6 18v-4h6v4H6z"/>
        </svg>
      </button>
      <button class="add-sound-btn-icon" (click)="onAddSound()" title="Add sound">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </button>
      <button class="fullscreen-btn-icon" (click)="toggleFullscreen()" title="{{ isFullscreen ? 'Exit fullscreen' : 'Fullscreen' }}">
        <svg *ngIf="!isFullscreen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
        </svg>
        <svg *ngIf="isFullscreen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
        </svg>
      </button>
      <button class="settings-btn-icon" (click)="onToggleSettings()" title="Settings">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
        </svg>
      </button>
    </div>
  </div>
  <!-- Progress Bar as bottom border -->
  <div class="progress-bar-border">
    <div class="progress-bar" [style.width.%]="playbackProgress"></div>
  </div>
</header>
