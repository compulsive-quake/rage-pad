<header class="header">
  <div class="header-content">
    <div class="logo">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="logo-icon">
        <defs>
          <radialGradient id="headerBg" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stop-color="#2a1538"/>
            <stop offset="100%" stop-color="#0f0f1a"/>
          </radialGradient>
          <linearGradient id="headerFire" x1="0" y1="1" x2="0" y2="0">
            <stop offset="0%" stop-color="#e74c3c"/>
            <stop offset="40%" stop-color="#e67e22"/>
            <stop offset="80%" stop-color="#f1c40f"/>
            <stop offset="100%" stop-color="#fff5cc"/>
          </linearGradient>
          <linearGradient id="headerNote" x1="0" y1="1" x2="0.3" y2="0">
            <stop offset="0%" stop-color="#8e44ad"/>
            <stop offset="100%" stop-color="#d5a6e6"/>
          </linearGradient>
          <linearGradient id="headerRing" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#9b59b6"/>
            <stop offset="50%" stop-color="#e74c3c"/>
            <stop offset="100%" stop-color="#e67e22"/>
          </linearGradient>
        </defs>
        <circle cx="256" cy="256" r="230" fill="url(#headerBg)"/>
        <circle cx="256" cy="256" r="230" fill="none" stroke="url(#headerRing)" stroke-width="12"/>
        <g opacity="0.9">
          <path d="M256 100 C240 160, 200 180, 210 220 C215 245, 235 250, 240 230 C245 215, 230 200, 240 170 C250 145, 256 130, 262 145 C272 170, 258 200, 265 220 C270 235, 285 240, 290 220 C300 180, 270 165, 256 100Z" fill="url(#headerFire)"/>
          <path d="M200 180 C190 155, 175 150, 180 135 C184 125, 196 130, 195 145 C194 155, 202 160, 200 180Z" fill="url(#headerFire)" opacity="0.7"/>
          <path d="M312 180 C322 155, 337 150, 332 135 C328 125, 316 130, 317 145 C318 155, 310 160, 312 180Z" fill="url(#headerFire)" opacity="0.7"/>
        </g>
        <ellipse cx="222" cy="340" rx="52" ry="40" transform="rotate(-15, 222, 340)" fill="url(#headerNote)"/>
        <rect x="268" y="148" width="14" height="205" rx="7" fill="url(#headerNote)"/>
        <path d="M282 148 C282 148, 330 170, 330 210 C330 240, 300 245, 290 230 C310 225, 318 205, 282 185Z" fill="url(#headerNote)"/>
      </svg>
      <h1>RagePad</h1>
    </div>
    <div class="header-search">
      <app-search-bar (search)="onSearch($event)"></app-search-bar>
    </div>
    <div class="header-actions">
      <button class="refresh-btn-icon" (click)="onRefresh()" [disabled]="isLoading" title="Refresh sounds">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" [class.spinning]="isLoading">
          <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
        </svg>
      </button>
      <button
        class="rename-btn-icon"
        [class.active]="isRenameMode"
        (click)="onToggleRenameMode()"
        title="{{ isRenameMode ? 'Exit rename mode' : 'Rename sounds' }}"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
        </svg>
      </button>
      <button
        class="reorder-btn-icon"
        [class.active]="isReorderMode"
        (click)="onToggleReorderMode()"
        title="{{ isReorderMode ? 'Exit reorder mode' : 'Reorder sounds' }}"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 15h18v-2H3v2zm0 4h18v-2H3v2zm0-8h18V9H3v2zm0-6v2h18V5H3z"/>
        </svg>
      </button>
      <button class="add-sound-btn-icon" (click)="onAddSound()" title="Add sound">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </button>
      <button class="qr-btn-icon" (click)="onShowQrCode()" title="Connect from phone">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 3h8v8H3V3zm2 2v4h4V5H5zm8-2h8v8h-8V3zm2 2v4h4V5h-4zM3 13h8v8H3v-8zm2 2v4h4v-4H5zm13-2h3v2h-3v-2zm-5 0h3v2h-3v-2zm2 4h2v2h-2v-2zm2 2h3v2h-3v-2zm-4 0h2v2h-2v-2zm4 2h3v2h-3v-2zm-4 0h2v2h-2v-2z"/>
        </svg>
      </button>
      <button class="fullscreen-btn-icon" (click)="toggleFullscreen()" title="{{ isFullscreen ? 'Exit fullscreen' : 'Fullscreen' }}">
        <svg *ngIf="!isFullscreen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
        </svg>
        <svg *ngIf="isFullscreen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
        </svg>
      </button>
      <button class="settings-btn-icon" (click)="onToggleSettings()" title="Settings">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
        </svg>
      </button>
    </div>
  </div>
  <!-- Progress Bar as bottom border -->
  <div class="progress-bar-border">
    <div class="progress-bar" [style.width.%]="playbackProgress"></div>
  </div>
</header>
