<div class="modal-overlay" *ngIf="isOpen" (mousedown)="onOverlayMouseDown($event)" (mouseup)="onOverlayMouseUp($event)">
  <div class="modal-content qr-modal-content">
    <div class="modal-header">
      <h2>Connect from Phone</h2>
      <button class="close-btn" (click)="onClose()">&times;</button>
    </div>
    <div class="modal-body qr-body">
      <p class="qr-instructions">Scan this QR code with your phone or tablet to open RagePad on the same network.</p>

      <div class="qr-container" *ngIf="!isLoading && !error">
        <img [src]="qrDataUrl" alt="QR Code" class="qr-image" />
      </div>

      <div class="qr-loading" *ngIf="isLoading">
        <svg class="spinning" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
        </svg>
      </div>

      <div class="qr-error" *ngIf="error">
        <p>{{ error }}</p>
      </div>

      <p class="qr-url" *ngIf="serverUrl && !isLoading">{{ serverUrl }}</p>
    </div>
  </div>
</div>
